{"remainingRequest":"E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\src\\components\\FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\src\\components\\FileUpload.vue","mtime":1712166163919},{"path":"E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710318967506},{"path":"E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1710318987774},{"path":"E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710318967506},{"path":"E:\\订单\\毕业设计\\留学帮助网站\\小嫦娥-3.31\\代码\\studyAbroadHelp\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1710318977016}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3RvcmFnZSBmcm9tICJAL2NvbW1vbi9zdG9yYWdlIjsKaW1wb3J0IGNvbmZpZyBmcm9tICJAL2NvbmZpZy9jb25maWciOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhc2VVcmw6IGNvbmZpZy5iYXNlVXJsLAogICAgICAvLyDmn6XnnIvlpKflm74KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOafpeeci+Wkp+WbvgogICAgICBkaWFsb2dJbWFnZVVybDogIiIsCiAgICAgIC8vIOe7hOS7tua4suafk+WbvueJh+eahOaVsOe7hOWtl+aute+8jOacieeJueauiuagvOW8j+imgeaxggogICAgICBmaWxlTGlzdDogW10sCiAgICAgIGZpbGVVcmxMaXN0OiBbXSwKICAgICAgbXlIZWFkZXJzOiB7fQogICAgfTsKICB9LAogIHByb3BzOiBbInRpcCIsICJhY3Rpb24iLCAibGltaXQiLCAibXVsdGlwbGUiLCAiZmlsZVVybHMiXSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLm15SGVhZGVycyA9IHsKICAgICAgJ1Rva2VuJzogc3RvcmFnZS5nZXQoIlRva2VuIikKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmlsZVVybHM6IGZ1bmN0aW9uIGZpbGVVcmxzKHZhbCwgb2xkVmFsKSB7CiAgICAgIC8vICAgY29uc29sZS5sb2coIm5ldzogJXMsIG9sZDogJXMiLCB2YWwsIG9sZFZhbCk7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOiuoeeul+WxnuaAp+eahCBnZXR0ZXIKICAgIGdldEFjdGlvblVybDogZnVuY3Rpb24gZ2V0QWN0aW9uVXJsKCkgewogICAgICByZXR1cm4gdGhpcy5iYXNlVXJsICsgdGhpcy5hY3Rpb247CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICBpZiAodGhpcy5maWxlVXJscykgewogICAgICAgIHRoaXMuZmlsZVVybExpc3QgPSB0aGlzLmZpbGVVcmxzLnNwbGl0KCIsIik7CiAgICAgICAgdmFyIGZpbGVBcnJheSA9IFtdOwogICAgICAgIHRoaXMuZmlsZVVybExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciB1cmwgPSBpdGVtOwogICAgICAgICAgdmFyIG5hbWUgPSBpbmRleDsKICAgICAgICAgIHZhciBmaWxlID0gewogICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICB1cmw6IHVybAogICAgICAgICAgfTsKICAgICAgICAgIGZpbGVBcnJheS5wdXNoKGZpbGUpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0RmlsZUxpc3QoZmlsZUFycmF5KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUJlZm9yZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlQmVmb3JlVXBsb2FkKGZpbGUpIHt9LAogICAgLy8g5LiK5Lyg5paH5Lu25oiQ5Yqf5ZCO5omn6KGMCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKHJlcyAmJiByZXMuY29kZSA9PT0gMCkgewogICAgICAgIGZpbGVMaXN0W2ZpbGVMaXN0Lmxlbmd0aCAtIDFdWyJ1cmwiXSA9ICJ1cGxvYWQvIiArIGZpbGUucmVzcG9uc2UuZmlsZTsKICAgICAgICB0aGlzLnNldEZpbGVMaXN0KGZpbGVMaXN0KTsKICAgICAgICB0aGlzLiRlbWl0KCJjaGFuZ2UiLCB0aGlzLmZpbGVVcmxMaXN0LmpvaW4oIiwiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWbvueJh+S4iuS8oOWksei0pQogICAgaGFuZGxlVXBsb2FkRXJyOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRFcnIoZXJyLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofku7bkuIrkvKDlpLHotKUiKTsKICAgIH0sCiAgICAvLyDnp7vpmaTlm77niYcKICAgIGhhbmRsZVJlbW92ZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuc2V0RmlsZUxpc3QoZmlsZUxpc3QpOwogICAgICB0aGlzLiRlbWl0KCJjaGFuZ2UiLCB0aGlzLmZpbGVVcmxMaXN0LmpvaW4oIiwiKSk7CiAgICB9LAogICAgLy8g5p+l55yL5aSn5Zu+CiAgICBoYW5kbGVVcGxvYWRQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOmZkOWItuWbvueJh+aVsOmHjwogICAgaGFuZGxlRXhjZWVkOiBmdW5jdGlvbiBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygiXHU2NzAwXHU1OTFBXHU0RTBBXHU0RjIwIi5jb25jYXQodGhpcy5saW1pdCwgIlx1NUYyMFx1NTZGRVx1NzI0NyIpKTsKICAgIH0sCiAgICAvLyDph43mlrDlr7lmaWxlTGlzdOi/m+ihjOi1i+WAvAogICAgc2V0RmlsZUxpc3Q6IGZ1bmN0aW9uIHNldEZpbGVMaXN0KGZpbGVMaXN0KSB7CiAgICAgIHZhciBmaWxlQXJyYXkgPSBbXTsKICAgICAgdmFyIGZpbGVVcmxBcnJheSA9IFtdOyAvLyDmnInkupvlm77niYfkuI3mmK/lhazlvIDnmoTvvIzmiYDku6XpnIDopoHmkLrluKZ0b2tlbuS/oeaBr+WBmuadg+mZkOagoemqjAoKICAgICAgdmFyIHRva2VuID0gc3RvcmFnZS5nZXQoInRva2VuIik7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICB2YXIgdXJsID0gaXRlbS51cmwuc3BsaXQoIj8iKVswXTsKCiAgICAgICAgaWYgKCF1cmwuc3RhcnRzV2l0aCgiaHR0cCIpKSB7CiAgICAgICAgICB1cmwgPSBfdGhpcy5iYXNlVXJsICsgdXJsOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgdmFyIGZpbGUgPSB7CiAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgdXJsOiB1cmwgKyAiP3Rva2VuPSIgKyB0b2tlbgogICAgICAgIH07CiAgICAgICAgZmlsZUFycmF5LnB1c2goZmlsZSk7CiAgICAgICAgZmlsZVVybEFycmF5LnB1c2godXJsKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlQXJyYXk7CiAgICAgIHRoaXMuZmlsZVVybExpc3QgPSBmaWxlVXJsQXJyYXk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 上传文件组件 -->\r\n    <el-upload\r\n      ref=\"upload\"\r\n      :action=\"getActionUrl\"\r\n      list-type=\"picture-card\"\r\n      :multiple=\"multiple\"\r\n      :limit=\"limit\"\r\n      :headers=\"myHeaders\"\r\n      :file-list=\"fileList\"\r\n      :on-exceed=\"handleExceed\"\r\n      :on-preview=\"handleUploadPreview\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :on-error=\"handleUploadErr\"\r\n      :before-upload=\"handleBeforeUpload\"\r\n    >\r\n      <i class=\"el-icon-plus\"></i>\r\n      <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:#838fa1;\">{{tip}}</div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\" size=\"tiny\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport storage from \"@/common/storage\";\r\nimport config from \"@/config/config\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: config.baseUrl,\r\n      // 查看大图\r\n      dialogVisible: false,\r\n      // 查看大图\r\n      dialogImageUrl: \"\",\r\n      // 组件渲染图片的数组字段，有特殊格式要求\r\n      fileList: [],\r\n      fileUrlList: [],\r\n      myHeaders:{}\r\n    };\r\n  },\r\n  props: [\"tip\", \"action\", \"limit\", \"multiple\", \"fileUrls\"],\r\n  mounted() {\r\n    this.init();\r\n    this.myHeaders= {\r\n      'Token':storage.get(\"Token\")\r\n    }\r\n  },\r\n  watch: {\r\n    fileUrls: function(val, oldVal) {\r\n      //   console.log(\"new: %s, old: %s\", val, oldVal);\r\n      this.init();\r\n    }\r\n  },\r\n  computed: {\r\n    // 计算属性的 getter\r\n    getActionUrl: function() {\r\n      return this.baseUrl +  this.action;\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    init() {\r\n      if (this.fileUrls) {\r\n        this.fileUrlList = this.fileUrls.split(\",\");\r\n        let fileArray = [];\r\n        this.fileUrlList.forEach(function(item, index) {\r\n          var url = item;\r\n          var name = index;\r\n          var file = {\r\n            name: name,\r\n            url: url\r\n          };\r\n          fileArray.push(file);\r\n        });\r\n        this.setFileList(fileArray);\r\n      }\r\n    },\r\n    handleBeforeUpload(file) {\r\n\t\r\n    },\r\n    // 上传文件成功后执行\r\n    handleUploadSuccess(res, file, fileList) {\r\n      if (res && res.code === 0) {\r\n        fileList[fileList.length - 1][\"url\"] = \"upload/\" + file.response.file;\r\n        this.setFileList(fileList);\r\n        this.$emit(\"change\", this.fileUrlList.join(\",\"));\r\n      } else {\r\n        this.$message.error(res.msg);\r\n      }\r\n    },\r\n    // 图片上传失败\r\n    handleUploadErr(err, file, fileList) {\r\n      this.$message.error(\"文件上传失败\");\r\n    },\r\n    // 移除图片\r\n    handleRemove(file, fileList) {\r\n      this.setFileList(fileList);\r\n      this.$emit(\"change\", this.fileUrlList.join(\",\"));\r\n    },\r\n    // 查看大图\r\n    handleUploadPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    // 限制图片数量\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(`最多上传${this.limit}张图片`);\r\n    },\r\n    // 重新对fileList进行赋值\r\n    setFileList(fileList) {\r\n      var fileArray = [];\r\n      var fileUrlArray = [];\r\n      // 有些图片不是公开的，所以需要携带token信息做权限校验\r\n      var token = storage.get(\"token\");\r\n      let _this = this;\r\n      fileList.forEach(function(item, index) {\r\n        var url = item.url.split(\"?\")[0];\r\n        if(!url.startsWith(\"http\")) {\r\n          url = _this.baseUrl +  url\r\n        }\r\n        var name = item.name;\r\n        var file = {\r\n          name: name,\r\n          url: url + \"?token=\" + token\r\n        };\r\n        fileArray.push(file);\r\n        fileUrlArray.push(url);\r\n      });\r\n      this.fileList = fileArray;\r\n      this.fileUrlList = fileUrlArray;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/components"}]}